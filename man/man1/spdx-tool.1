.\"
.TH SPDX-TOOL 1 "May 19, 2024" "SPDX License Tool"
.SH NAME
spdx-tool - SPDX license management tool
.SH SYNOPSIS
.B spdx-tool
[ -v ] [-vv] [-vvv] [-V]
[-t
.I count
] [--no-color]
 [-c | --check] [-i | --identify] [-f | --files]
 [-m | --mimes] [-p | --print-license] [--languages]
 [--no-builtin-licenses]
 [--ignore-licenses
.I spdx-name1,spdx-name2,...
]
 [--only-licenses
.I spdx-name1,spdx-name2,...
]
 [--ignore-languages
.I lang1,lang2,...
]
 [--only-languages
.I lang1,lang2,...
]
 [--output-json
.I file
] [--output-xml
.I file
]
 [--update
.I pattern
] [--license
.I file
]
.I files|directories
.br
.SH DESCRIPTION
\fIspdx-tool\fR scans the source files to identify licenses and allows to
update them in order to use the SPDX license format.  It can be used to:
.\"
.IP \(bu 4
identify the license used in source files of a project,
.\"
.IP \(bu 4
produce a JSON/XML report for the licenses found with the list of files,
.\"
.IP \(bu 4
replace a license header by the SPDX license tag header.
.\"
.P
The tool uses the license templates to identify
the license used in source files.  The builtin repository contains arround 600 license templates
and it can be completed by your own templates as long as you use the SPDX license description
format described in
\fIThe Software Package Data Exchange® (SPDX®) Specification Version 2.3\fP.
.\"
.P
The spdx-tool scans the directory or files passed as parameter.  Directories are scanned recursively
and the
.I .gitignore
file is first looked in each directory to take into account files which are ignored
in the project.  For each file, the spdx-tool tries to:

.\"
.IP \(bu 4
identify the language of the source file,
.\"
.IP \(bu 4
extract the license header text at beginning of the source file,
.\"
.IP \(bu 4
identify the license by using the following algorithms:
.RS 4
.\"
.IP \(bu 3
look for a
.I SPDX-License-Identifier
tag, when it was found, the match report indicates
.IR SPDX ,
.\"
.IP \(bu 3
look for a template match from the license templates
builtin repository or the templates configured for the tool.  When this succeeds, the match
report indicates
.IR TMPL ,
.\"
.IP \(bu 3
guess the best matching license by using an inverted index of license tokens.
The tool then uses a classical \fIterm frequency inverse document frequency\fP
algorithm to find the best matching license.  The report will indicate the
highest \fICosine\fP similarity found.
.\"
.P
.SH OPTIONS
The following options are recognized by \fIspdx-tool\fR:
.TP 5
-V
Prints the
.I spdx-tool
version.
.TP 5
-v
Enable the verbose mode.
.TP 5
-vv
Enable debugging output.
.TP 5
-t \fIcount\fP
Defines the number of threads for the encryption and decryption process.
By default, it uses the number of system CPU cores.
.TP 5
--no-color
Disable colors in output.
.TP 5
--check
Check and gather licenses used in source files.  The report indicates a list of license with their SPDX name,
the number of files found and the overall ratio of files per-license.
.TP 5
--files
Check and gather licenses used in source files.  The report indicates the list of files grouped by the
license SPDX name.
.TP 5
--languages
Produce a report with the list of files grouped by the language identified.  It can be used to identify
and understand why some files have no license header.
.TP 5
--mimes
Produce a report with the list of files grouped by the mime type that is identified.  This option is
useful to understand why some files have no license header.
.TP 5
--print-license
Print the license which was identified from the source file after the analysis.
.TP 5
--update \fIpattern\fP
Update the license header found by the equivalent SPDX license with the
.I SPDX-License-Identifier
tag.  The
.I pattern
string allows to control the replacement to allow keeping some lines from the existing license header.
It indicates which lines must be kept before and after the SPDX tag.
The pattern has the following format:
.\"
.RS 8
[\fInumber\fP[..\fInumber\fP].]spdx[.\fInumber\fP[..number]]
.\"
.RE
Line numbers are relative to the first line representing the license header.
Use the
.I --print-license
option to see how the tool identifies the license and decide which lines must be kept.

.SH SEE ALSO
.IR file (1)
.\"
.\"
.SH AUTHOR
Written by Stephane Carrez.
.\"

